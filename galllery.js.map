{"version":3,"file":"galllery.js","sources":["../src/js/gallary/pixabay-api.js","../src/js/gallary/render-function.js","../src/js/gallary/main.js"],"sourcesContent":["import '../../css/styles.css';\nimport axios from 'axios';\n\nconst API_KEY = '46929874-64df5169043d6b6fbb8fb2b93';\n\n// export async function fetchImages(query, page = 1) {\n//   const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n//   try {\n//     const response = await axios.get(url);\n//     return response.data.hits; // Повертаємо масив зображень\n//   } catch (error) {\n//     console.error('Error fetching images:', error);\n//     return [];\n//   }\n// }\n\nexport async function fetchImages(query, page = 1) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data.hits; // Повертаємо масив зображень\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport '../../css/styles.css';\n\nexport function renderImages(images, clearGallery = false) {\n  const gallery = document.querySelector('.gallery');\n\n  // Clear the gallery only if clearGallery is true\n  if (clearGallery) {\n    gallery.innerHTML = '';\n  }\n\n  images.forEach(image => {\n    const card = document.createElement('a');\n    card.href = image.largeImageURL;\n    card.classList.add('gallery-item');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.classList.add('image');\n\n    const info = document.createElement('div');\n    info.classList.add('image-info');\n    info.innerHTML = `\n      <p class=\"paragraf-text\"><span class=\"span-text\">Likes:</span> ${image.likes}</p>\n      <p class=\"paragraf-text\"><span class=\"span-text\">Views:</span> ${image.views}</p>\n      <p class=\"paragraf-text\"><span class=\"span-text\">Comments:</span> ${image.comments}</p>\n      <p class=\"paragraf-text\"><span class=\"span-text\">Downloads:</span> ${image.downloads}</p>\n    `;\n\n    card.appendChild(img);\n    card.appendChild(info);\n    gallery.appendChild(card);\n  });\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function renderError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\nexport function showLoadingIndicator() {\n  document.querySelector('.loading-indicator').style.display = 'flex';\n}\n\nexport function hideLoadingIndicator() {\n  document.querySelector('.loading-indicator').style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.js-load-more');\n  loadMoreButton.classList.remove('load-more-hiden');\n\n  // const EndLoadText = document.querySelector('.no-more-images-message');\n  // EndLoadText.classList.classList.add('load-more-hiden');\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.js-load-more');\n  loadMoreButton.classList.add('load-more-hiden');\n}\n","import '../../css/styles.css';\n\nimport { fetchImages } from './pixabay-api';\nimport {\n  renderImages,\n  renderError,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  clearGallery,\n} from './render-function';\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst MoreBtn = document.querySelector('.js-load-more');\n\nlet currentPage = 1; // Початковий номер сторінки\nlet searchQuery = ''; // Пошуковий запит\n\nlet totalLoadedImages = 0;\n\nMoreBtn.addEventListener('click', loadMoreImages);\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  searchQuery = searchInput.value.trim();\n  currentPage = 1;\n  //!\n  totalLoadedImages = 0;\n\n  if (!searchQuery) {\n    renderError('Please enter a search query.');\n    return;\n  }\n\n  clearGallery();\n  showLoadingIndicator();\n\n  try {\n    const images = await fetchImages(searchQuery, currentPage);\n\n    if (images.length === 0) {\n      renderError(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      hideLoadMoreButton();\n    } else {\n      renderImages(images, true);\n      totalLoadedImages += images.length;\n\n      if (images.length < 15) {\n        hideLoadMoreButton();\n      } else {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    renderError(\n      'An error occurred while fetching images. Please try again later.'\n    );\n  } finally {\n    hideLoadingIndicator();\n  }\n\n  searchInput.value = '';\n});\n\nasync function loadMoreImages() {\n  currentPage += 1;\n\n  try {\n    const newImages = await fetchImages(searchQuery, currentPage);\n\n    renderImages(newImages, false);\n    totalLoadedImages += newImages.length;\n\n    scrollByTwoImageHeights();\n\n    if (newImages.length < 15) {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    renderError(\n      'An error occurred while fetching more images. Please try again later.'\n    );\n  }\n}\n\nfunction scrollByTwoImageHeights() {\n  const gallery = document.querySelector('.gallery');\n  const firstImage = gallery.querySelector('img');\n\n  if (firstImage) {\n    const imageHeight = firstImage.offsetHeight;\n    window.scrollBy({\n      top: imageHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","fetchImages","query","page","url","axios","error","renderImages","images","clearGallery","gallery","image","card","img","info","SimpleLightbox","renderError","message","showLoadingIndicator","hideLoadingIndicator","showLoadMoreButton","hideLoadMoreButton","searchForm","searchInput","MoreBtn","currentPage","searchQuery","totalLoadedImages","loadMoreImages","newImages","scrollByTwoImageHeights","firstImage","imageHeight"],"mappings":"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"}