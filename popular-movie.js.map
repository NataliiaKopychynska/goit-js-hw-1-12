{"version":3,"file":"popular-movie.js","sources":["../src/js/movie/pixabay-api.js","../src/js/movie/render-function.js","../src/js/movie/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst END_POINT = '/trending/movie/day';\nconst API_KEY = '3305064ea972acdb0e395953537191ad';\n\nexport async function fetchMovies(page = 1) {\n  try {\n    const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n      params: {\n        api_key: API_KEY,\n        page,\n      },\n    });\n    console.log(data); // Додайте це, щоб побачити відповідь\n    return data;\n  } catch (error) {\n    console.error('Помилка під час запиту:', error.message);\n    throw error;\n  }\n}\n","export function createMarkup(movies) {\n  return movies\n    .map(\n      ({ poster_path, release_date, original_title, vote_average, id }) => `\n      <li class=\"movie-card data-id=\"${id}\">\n         \n           <img class=\"poster-movie\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${original_title}\">\n           <div class=\"movie-info\">\n               <h2 class=\"name-movie\">${original_title}</h2>\n               <p class=\"release-date\">Release date: ${release_date}</p>\n               <p class=\"rating-movie\">Rating: ${vote_average}</p>\n               \n           </div>\n           <button class=\"learn-more-button\" data-id=\"${id}\">Learn more</button>\n         \n      </li>`\n    )\n    .join('');\n}\n\nexport function modalMarkup({\n  poster_path,\n  release_date,\n  original_title,\n  vote_average,\n  overview,\n}) {\n  return `\n      <div class=\"modal-title-movie\">\n        <button class=\"modal-close\">x</button>\n        <div class=\"modal-content\">\n          <img class=\"img-modal\" src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${original_title}\">\n          <div class=\"container-title-modal\">\n            <h2>${original_title}</h2>\n            <p>${overview}</p>\n            <p><strong>Release date: </strong> ${release_date}</p>\n            <p><strong>Rating: </strong> ${vote_average}</p>\n          </div>\n        </div>\n      </div>\n    \n    `;\n}\n","import { fetchMovies } from './pixabay-api';\nimport { createMarkup, modalMarkup } from './render-function';\nimport '../../css/styles.css';\n\nconst containerMovie = document.querySelector('.js-movie-list');\nconst loadMore = document.querySelector('.js-load-more');\n\nlet page = 1;\n\nasync function renderMovies(page = 1) {\n  try {\n    const data = await fetchMovies(page);\n\n    containerMovie.insertAdjacentHTML('beforeend', createMarkup(data.results));\n\n    if (data.page < data.total_pages) {\n      loadMore.classList.replace('load-more-hiden', 'button');\n    } else {\n      loadMore.classList.replace('button', 'load-more-hiden');\n    }\n  } catch (error) {\n    alert(error.message);\n  }\n}\nloadMore.addEventListener('click', async () => {\n  page += 1;\n  loadMore.disabled = true;\n\n  await renderMovies(page);\n\n  loadMore.disabled = false;\n});\n\nrenderMovies();\n\n// const movieCard = document.querySelector('.movie-card');\nconst modalContainer = document.querySelector('.modal-overlay');\n\ncontainerMovie.addEventListener('click', onLearnMoreClick);\n\nfunction onLearnMoreClick(evt) {\n  const button = evt.target.closest('.learn-more-button');\n  if (!button) return;\n\n  const movieId = button.dataset.id;\n\n  modalContainer.innerHTML = '';\n  // console.log(movieId);\n  modalContainer.classList.remove('modall-hiden');\n\n  fetchMoviId(movieId);\n}\n\nexport function fetchMoviId(movieId) {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzMzA1MDY0ZWE5NzJhY2RiMGUzOTU5NTM1MzcxOTFhZCIsIm5iZiI6MTczMTk2NDMxNy4yNzI0ODUsInN1YiI6IjY3MmUxNDJiYTgxODcxM2JkZjQ5NDliNSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ujyy7e_t_8kU-Sxr8b1pFxTDQi8zc-bo3UZcavZtmkA',\n    },\n  };\n\n  fetch(`https://api.themoviedb.org/3/movie/${movieId}`, options)\n    .then(res => res.json())\n    .then(res => {\n      modalContainer.innerHTML = modalMarkup(res);\n      console.log(res);\n\n      // Додаємо обробник для кнопки закриття\n      const closeButton = modalContainer.querySelector('.modal-close');\n      closeButton.addEventListener('click', () => {\n        modalContainer.classList.add('modall-hiden');\n      });\n\n      // Додаємо обробник для кліку на фон\n      modalContainer.addEventListener('click', evt => {\n        if (evt.target === modalContainer) {\n          modalContainer.classList.add('modall-hiden');\n        }\n      });\n    })\n    .catch(error => {\n      console.error('Помилка під час запиту:', error.message);\n      throw error;\n    });\n}\n\n// async function onLearnMoreClick(evt) {\n//   const button = evt.target.closest('.learn-more-button');\n//   if (!button) return;\n\n//   // const movieId = button.dataset.id;\n\n//   try {\n//     const movieDetails = await fetchMovieDetails(movieId);\n\n//     // Відображення модального вікна\n//     openModalWithDetails(movieDetails);\n//   } catch (error) {\n//     alert(`Не вдалося отримати інформацію про фільм: ${error.message}`);\n//   }\n// }\n\n// async function openModalWithDetails(page) {\n//   try {\n//     const data = await fetchMovies(page);\n\n//     modalContainer.insertAdjacentHTML('beforeend', modalMarkup(data.results));\n//   } catch (error) {\n//     alert(error.message);\n//   }\n// }\n"],"names":["BASE_URL","END_POINT","API_KEY","fetchMovies","page","data","axios","error","createMarkup","movies","poster_path","release_date","original_title","vote_average","id","modalMarkup","overview","containerMovie","loadMore","renderMovies","modalContainer","onLearnMoreClick","evt","button","movieId","fetchMoviId","options","res"],"mappings":"sHAEA,MAAMA,EAAW,+BACXC,EAAY,sBACZC,EAAU,mCAET,eAAeC,EAAYC,EAAO,EAAG,CAC1C,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,GAAGN,CAAQ,GAAGC,CAAS,GAAI,CACtD,OAAQ,CACN,QAASC,EACT,KAAAE,CACD,CACP,CAAK,EACD,eAAQ,IAAIC,CAAI,EACTA,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,0BAA2BA,EAAM,OAAO,EAChDA,CACP,CACH,CCpBO,SAASC,EAAaC,EAAQ,CACnC,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,aAAAC,EAAc,eAAAC,EAAgB,aAAAC,EAAc,GAAAC,CAAE,IAAO;AAAA,uCACpCA,CAAE;AAAA;AAAA,4EAEmCJ,CAAW,UAAUE,CAAc;AAAA;AAAA,wCAEvEA,CAAc;AAAA,uDACCD,CAAY;AAAA,iDAClBE,CAAY;AAAA;AAAA;AAAA,wDAGLC,CAAE;AAAA;AAAA,YAGrD,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAY,CAC1B,YAAAL,EACA,aAAAC,EACA,eAAAC,EACA,aAAAC,EACA,SAAAG,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA;AAAA,wEAI+DN,CAAW,UAAUE,CAAc;AAAA;AAAA,kBAEzFA,CAAc;AAAA,iBACfI,CAAQ;AAAA,iDACwBL,CAAY;AAAA,2CAClBE,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA,KAMvD,CCtCA,MAAMI,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAW,SAAS,cAAc,eAAe,EAEvD,IAAId,EAAO,EAEX,eAAee,EAAaf,EAAO,EAAG,CACpC,GAAI,CACF,MAAMC,EAAO,MAAMF,EAAYC,CAAI,EAEnCa,EAAe,mBAAmB,YAAaT,EAAaH,EAAK,OAAO,CAAC,EAErEA,EAAK,KAAOA,EAAK,YACnBa,EAAS,UAAU,QAAQ,kBAAmB,QAAQ,EAEtDA,EAAS,UAAU,QAAQ,SAAU,iBAAiB,CAEzD,OAAQX,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACH,CACAW,EAAS,iBAAiB,QAAS,SAAY,CAC7Cd,GAAQ,EACRc,EAAS,SAAW,GAEpB,MAAMC,EAAaf,CAAI,EAEvBc,EAAS,SAAW,EACtB,CAAC,EAEDC,IAGA,MAAMC,EAAiB,SAAS,cAAc,gBAAgB,EAE9DH,EAAe,iBAAiB,QAASI,CAAgB,EAEzD,SAASA,EAAiBC,EAAK,CAC7B,MAAMC,EAASD,EAAI,OAAO,QAAQ,oBAAoB,EACtD,GAAI,CAACC,EAAQ,OAEb,MAAMC,EAAUD,EAAO,QAAQ,GAE/BH,EAAe,UAAY,GAE3BA,EAAe,UAAU,OAAO,cAAc,EAE9CK,EAAYD,CAAO,CACrB,CAEO,SAASC,EAAYD,EAAS,CACnC,MAAME,EAAU,CACd,OAAQ,MACR,QAAS,CACP,OAAQ,mBACR,cACE,4PACH,CACL,EAEE,MAAM,sCAAsCF,CAAO,GAAIE,CAAO,EAC3D,KAAKC,GAAOA,EAAI,MAAM,EACtB,KAAKA,GAAO,CACXP,EAAe,UAAYL,EAAYY,CAAG,EAC1C,QAAQ,IAAIA,CAAG,EAGKP,EAAe,cAAc,cAAc,EACnD,iBAAiB,QAAS,IAAM,CAC1CA,EAAe,UAAU,IAAI,cAAc,CACnD,CAAO,EAGDA,EAAe,iBAAiB,QAASE,GAAO,CAC1CA,EAAI,SAAWF,GACjBA,EAAe,UAAU,IAAI,cAAc,CAErD,CAAO,CACP,CAAK,EACA,MAAMb,GAAS,CACd,cAAQ,MAAM,0BAA2BA,EAAM,OAAO,EAChDA,CACZ,CAAK,CACL"}